"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5078],{1524:(e,n,t)=>{t.d(n,{Rd:()=>u,fS:()=>r,up:()=>o});var a=t(1761),i=t(27062);function o(){let{value:e}=(0,i.fS)("trials_and_tribulations_of_high_school_football");return!1}function r(){let{value:e}=(0,i.fS)("trials_and_tribulations_of_high_school_football");return e}function u(){var e,n;let t=o(),{account:i}=(0,a.YL)(),r=null!=(n=null==i||null==(e=i.settings)?void 0:e.enabled_monkeys_in_a_barrel)&&n;return t&&r}},45078:(e,n,t)=>{t.d(n,{rX:()=>p,v2:()=>h,vP:()=>f});var a=t(68096),i=t(7726),o=t(98518),r=t(1761),u=t(27062),l=t(77101),s=t(85544),c=t(57383),d=t(75973),_=t(1524),g=t(85717),v=t(71436),y=t(45715);let h=()=>{let{initGithubAuth:e}=(0,v.nB)(),{initDriveAuth:n}=(0,g.cI)();return t=>{t===l.v8.GITHUB?e():t===l.v8.GDRIVE?n():t===l.v8.OUTLINE&&(0,y.so)()}},m=()=>{let{value:e}=(0,u.fS)("claudeai_paprika_sticky"),n=["enabled_web_search","enabled_bananagrams","enabled_sourdough","enabled_foccacia","enabled_mcp_tools"];return e&&n.push("paprika_mode"),n},f=e=>{let{conversation:n,pendingConversationSettings:t}=(0,c.o)(),{account:a}=(0,r.YL)(),i=m();if((0,_.Rd)(),n){var o;return null==(o=n.conversationSettings)?void 0:o[e]}return i.includes(e)?null==a?void 0:a.settings[e]:null==t?void 0:t[e]},p=()=>{let{conversation:e,setPendingConversationSettings:n}=(0,c.o)(),{account:t}=(0,r.YL)(),u=m(),{isInBeam:l,beamConversationSettings:_,setBeamConversationSettings:g}=(0,d.d)(),{track:v}=(0,o.st)(),{mutate:y}=(0,a.Jy)(),{mutate:h}=(0,i.HF)(null==e?void 0:e.id),f=a=>{if(!t)return;e?h({settings:{...a}}):l&&g&&g({..._,...a});let i={},o=!1;Object.keys(a).forEach(t=>{let r=a[t];u.includes(t)?(Object.assign(i,{[t]:r}),o=!0):(s.W$.includes(t)||"enabled_monkeys_in_a_barrel"===t)&&!e&&n({[t]:r}),v({event_key:"claudeai.conversation.setting.toggled",conversation_uuid:(null==e?void 0:e.id)||null,setting:t,value:r})}),o&&y({...t.settings,...i})};return{toggleConversationSetting:(e,n)=>{f({[e]:n})},batchToggleConversationSettings:f}}},45564:(e,n,t)=>{t.d(n,{Q:()=>l,t:()=>s});var a=t(54568),i=t(89256),o=t.n(i),r=t(7620);let u=(0,r.createContext)({isOpen:!1,dropdownToOpen:void 0,openModal:o(),closeModal:o(),clearCallerIdentifier:o()}),l=e=>{let{children:n}=e,[t,i]=(0,r.useState)(!1),o=(0,r.useRef)(void 0),[l,s]=(0,r.useState)(void 0);return(0,a.jsx)(u.Provider,{value:{isOpen:t,openModal:e=>{i(!0),o.current=e},closeModal:()=>{i(!1),s(o.current)},dropdownToOpen:l,clearCallerIdentifier:()=>{s(void 0)}},children:n})},s=()=>(0,r.useContext)(u)},45715:(e,n,t)=>{t.d(n,{AI:()=>s,I5:()=>c,n0:()=>l,qp:()=>d,so:()=>_});var a=t(77186),i=t(1761),o=t(71473);t(77101);var r=t(87606);t(7620);var u=t(91768);let l=e=>{let{uri:n}=e,{data:t,isLoading:r}=(e=>{let{documentId:n}=e,{account:t,activeOrganization:r}=(0,i.YL)(),u=null==t?void 0:t.uuid,l=null==r?void 0:r.uuid,c=s();return(0,a.Sk)("/api/organizations/".concat(l,"/sync/mcp/outline/document/").concat(n),{queryKey:[o.hq,{accountUUID:u,orgUUID:l,documentId:n}],enabled:c})})({documentId:n});return{title:null==t?void 0:t.title,isLoading:r}},s=()=>{let{data:e}=(0,u.LN)();return!1},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,i.YL)(),r=null==t?void 0:t.uuid,u=s(),{data:l,refetch:c}=(0,a.Sk)("/api/organizations/".concat(r,"/sync/mcp/outline/auth"),{queryKey:[o.iP,{accountUUID:null==n?void 0:n.uuid,orgUUID:r}],enabled:!!(t&&u),staleTime:5e3}),{mutate:d,isPending:_}=(0,a.L2)("/api/organizations/".concat(r,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(t&&u),...e,onSuccess:function(){for(var n,t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];null==(n=e.onSuccess)||n.call(e,...a)}});return{isOutlineAuthenticated:!!(null==l?void 0:l.is_authenticated),refetch:c,initOutlineAuth:d,isLoadingOutlineAuthInit:_}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,i.YL)(),u=null==n?void 0:n.uuid,l=null==t?void 0:t.uuid,c=s(),d=(0,r.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(l,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(t&&c),...e,onSuccess:function(){for(var n,t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];d.invalidateQueries({queryKey:[o.iP,{accountUUID:u,orgUUID:l}]}),null==(n=e.onSuccess)||n.call(e,...a)}})},_=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/connectors?redirect_url=".concat(e,"&open_outline_auth=true")}},68096:(e,n,t)=>{t.d(n,{B5:()=>g,BL:()=>S,DK:()=>v,IX:()=>w,Jy:()=>L,Ng:()=>p,Nv:()=>b,QP:()=>P,Z5:()=>f,a0:()=>y,gz:()=>A,jU:()=>T,kd:()=>I,mY:()=>m,nX:()=>k,vt:()=>_,zt:()=>h});var a=t(98518),i=t(77186),o=t(10158),r=t(29585),u=t(87296),l=t(71473),s=t(21036),c=t(87606),d=t(62942);function _(e,n){return(0,i.Sk)("/api/auth/login_methods?email=".concat(encodeURIComponent(e||""),"&source=").concat(n),{enabled:!!e&&(0,u.B9)(e),meta:{noToast:!0}})}let g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,a.st)(),t=(0,o.fZ)();return(0,i.L2)("/api/auth/send_magic_link","POST",{...e,onSuccess:(t,a,i)=>{t.sso_url?n({event_key:"login.email.sso_initiated"}):n({event_key:"login.email.magic_link_sent"}),e.onSuccess&&e.onSuccess(t,a,i)},onError:(t,a,i)=>{n({event_key:"login.email.magic_link_send_error",error:t.message,error_type:t instanceof r.LG?t.type:"unknown"}),e.onError&&e.onError(t,a,i)},onMutate:e=>{n({event_key:"login.email.sending_magic_link"})},transformVariables:e=>({...e,source:t?"claude":"console"})})},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,o.fZ)();return(0,i.L2)("/api/auth/exchange_nonce_for_code","POST",{...e,transformVariables:e=>({...e,source:n?"claude":"console"})})},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,a.st)(),t=(0,o.fZ)(),u=(0,o.Mk)(),{client:l}=(0,s.useStatsigClient)();return(0,i.L2)("/api/auth/verify_magic_link","POST",{...e,onSuccess:(t,a,i)=>{"code"===a.credentials.method?n({event_key:"login.email.finished"}):n({event_key:"login.email.magic_link_success"}),E(l,t,n,"email","magic_link",u),e.onSuccess&&e.onSuccess(t,a,i)},onError:(t,a,i)=>{if("code"===a.credentials.method){let e="unknown";"already_used"===t.message?e="already_used":t instanceof r.LG&&"rate_limit_error"===t.type?e="rate_limit":t instanceof r.LG&&400===t.statusCode&&(e="incorrect_code"),n({event_key:"login.email.code_verification_error",error:t.message,error_type:e})}else n({event_key:"login.email.magic_link_verification_error",error:t.message});e.onError&&e.onError(t,a,i)},onMutate:e=>{"code"===e.credentials.method?n({event_key:"login.email.verifying_code"}):n({event_key:"login.email.verifying_magic_link"})},transformVariables:e=>({...e,source:t?"claude":"console"})})},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,a.st)(),t=(0,o.fZ)(),r=(0,o.Mk)(),u=(0,d.useRouter)(),{client:l}=(0,s.useStatsigClient)();return(0,i.L2)("/api/auth/verify_google","POST",{...e,onSuccess:(t,a,i)=>{!t.success&&t.sso_url?(n({event_key:"login.email.sso_initiated"}),u.push(t.sso_url)):(n({event_key:"login.google.finished"}),E(l,t,n,"google","button",r),e.onSuccess&&e.onSuccess(t,a,i))},onError:(t,a,i)=>{n({event_key:"login.google.verification_error",error:t.message}),e.onError&&e.onError(t,a,i)},onMutate:e=>{n({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:t?"claude":"console"})})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,a.st)(),t=(0,o.fZ)(),r=(0,o.Mk)(),u=(0,d.useRouter)(),{client:l}=(0,s.useStatsigClient)();return(0,i.L2)("/api/auth/verify_google_mobile","POST",{...e,onSuccess:(t,a,i)=>{!t.success&&t.sso_url?(n({event_key:"login.email.sso_initiated"}),u.push(t.sso_url)):(n({event_key:"login.google.finished",flow_type:"one_tap"}),E(l,t,n,"google","onetap",r),e.onSuccess&&e.onSuccess(t,a,i))},onError:(t,a,i)=>{n({event_key:"login.google.verification_error",error:t.message}),e.onError&&e.onError(t,a,i)},onMutate:e=>{n({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:t?"claude":"console"})})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,a.st)(),t=(0,o.fZ)(),r=(0,d.useRouter)();return(0,i.L2)("/api/auth/accept_invite","POST",{...e,onSuccess:(t,a,i)=>{!t.success&&t.sso_url?(n({event_key:"login.email.sso_initiated"}),r.push(t.sso_url)):e.onSuccess&&e.onSuccess(t,a,i)},transformVariables:e=>({...e,source:t?"claude":"console"})})},p=()=>(0,i.L2)("/api/auth/logout","POST"),b=()=>(0,i.L2)("/api/auth/logout/all-sessions","POST"),S=()=>{let e=(0,c.useQueryClient)();return(0,i.L2)("/api/account?statsig_hashing_algorithm=djb2","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[l.Rw]})}})},L=()=>(0,i.Qv)("/api/account?statsig_hashing_algorithm=djb2","PUT",(e,n)=>(null==n?void 0:n.account)?{...n,account:{...n.account,settings:e}}:n,{queryKey:[l.Rw],transformVariables:e=>({settings:e})}),k=()=>{let e=(0,c.useQueryClient)();return(0,i.L2)("/api/account/accept_legal_docs","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[l.Rw]})}})},T=()=>(0,i.L2)("/api/account/email_consent","PUT");function E(e,n,t,a,i,o){n.created&&t({event_key:"login.account.created",surface:o,authMethod:a,flow:i},n.account)}function I(e){return(0,i.Sk)("/api/signups/".concat(e),{enabled:!!e,staleTime:0})}function w(e){return(0,i.Sk)("/api/enterprise_auth/idp_redirect_url?organization_id=".concat(e),{meta:{noToast:!0}})}function A(e,n,t){return(0,i.Sk)("/api/enterprise_auth/sso_callback?code=".concat(e,"&state=").concat(n,"&source=").concat(t),{meta:{noToast:!0}})}function P(e,n){var t;let a=(0,c.useQueryClient)();return(0,i.L2)("/api/highside/login","GET",{...n,headers:{...null!=(t=n.headers)?t:{},...e},async onSuccess(){for(var e,t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];await a.invalidateQueries({queryKey:[l.Rw]}),null==(e=n.onSuccess)||e.call(n,...i)}})}},71436:(e,n,t)=>{t.d(n,{Cq:()=>h,I:()=>p,b4:()=>m,nB:()=>v,nw:()=>b,rW:()=>y,tn:()=>S,yL:()=>f});var a=t(77186),i=t(1761),o=t(71473),r=t(77101),u=t(90119),l=t(87606),s=t(62942),c=t(7620),d=t(91768),_=t(40459);let g="github_success",v=function(){var e;let{callerIdentifier:n,toggleGithubModalOpen:t,fetchImmediately:r=!1,pathname:l,queryString:_}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:v}=(0,i.YL)(),y=null==v?void 0:v.uuid,m=h(),[f,p]=(0,c.useState)(r),b=(e=>{let{shouldFetch:n=!1}=e,{activeOrganization:t}=(0,i.YL)(),r=null==t?void 0:t.uuid,u=h();return(0,a.Sk)("/api/organizations/".concat(r,"/sync/github/auth"),{queryKey:[o.Hv,{orgUUID:r}],enabled:!!(n&&t&&u)})})({shouldFetch:f}),S=(0,c.useCallback)(async()=>{var e,n;return f?null==(n=b.data)?void 0:n.is_authenticated:(p(!0),null==(e=(await b.refetch()).data)?void 0:e.is_authenticated)},[b,f]),{mutate:L}=(0,a.L2)("/api/organizations/".concat(y,"/sync/github/auth/start"),"POST",{enabled:!!(v&&m),onSuccess:e=>{window.open(e.redirect_url)}}),k="".concat(g,"=").concat(n).concat(_?"&".concat(_):"");(0,d.FZ)({callerIdentifier:n,successParam:g,handleOpen:()=>{null==t||t(!0)}});let T=(0,s.useSearchParams)(),E=(0,u.V)(),I=(0,c.useRef)(!1),w=(0,s.usePathname)(),A=(0,d.dH)({pathname:l||w,searchParams:T,queryString:k,isClaudeApp:E});return{checkIsGithubAuthenticated:S,initGithubAuth:()=>{if(m){if(E)return void window.open("/settings/connectors?open_in_browser=1&auth_start=github&origin=".concat(A));I.current||(I.current=!0,L({pre_auth_state:{origin:A}}))}},isGithubAuthenticated:null==(e=b.data)?void 0:e.is_authenticated,isLoading:b.isLoading}},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,i.YL)(),t=null==n?void 0:n.uuid,r=h(),u=(0,l.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(t,"/sync/github/auth"),"DELETE",{enabled:!!(n&&r),...e,onSuccess:function(){for(var n,a=arguments.length,i=Array(a),r=0;r<a;r++)i[r]=arguments[r];u.invalidateQueries({queryKey:[o.Hv,{orgUUID:t}]}),null==(n=e.onSuccess)||n.call(e,...i)}})},h=()=>{let{data:e}=(0,d.LN)(),n=(0,i.mV)(),t=!!(Array.isArray(e)&&e.find(e=>e.type===r.v8.GITHUB&&e.enabled));return!!(!_.env.NEXT_PUBLIC_DISABLE_GITHUB_INTEGRATION&&(!n||t))},m=()=>{let{activeOrganization:e}=(0,i.YL)(),n=null==e?void 0:e.uuid,t=h();return(0,a.Sk)("/api/organizations/".concat(n,"/sync/github/repos"),{queryKey:[o.jL,{orgUUID:n}],enabled:!!(e&&t),meta:{noToast:!0}})},f=()=>{let{activeOrganization:e}=(0,i.YL)(),n=null==e?void 0:e.uuid,t=h();return(0,a.Sk)("/api/organizations/".concat(n,"/code/repos"),{queryKey:["SYNC_GH_REPOS_WITH_STATUS_QUERY_KEY",{orgUUID:n}],enabled:!!(e&&n&&t),meta:{noToast:!0}})},p=e=>{var n,t;return(null==(n=e.status)?void 0:n.workflow_enabled)===!0&&(null==(t=e.status)?void 0:t.app_installed)===!0},b=e=>!!e&&0!==e.length&&e.some(p),S=e=>{var n;let{owner:t,repo:r,branch:u}=e,l=(e=>{let{owner:n,repo:t,branch:r}=e,{activeOrganization:u}=(0,i.YL)(),l=null==u?void 0:u.uuid,s=h(),c=new URLSearchParams({owner:null!=n?n:"",repo:null!=t?t:""}).toString();return(0,a.Sk)("/api/organizations/".concat(l,"/sync/github/repo?").concat(c),{queryKey:[o.yB,{orgUUID:l,owner:n,repo:t}],enabled:!!(n&&t&&!r&&u&&s),meta:{noToast:!0}})})({owner:t,repo:r,branch:u}),s=(e=>{let{owner:n,repo:t,branch:r}=e,{activeOrganization:u}=(0,i.YL)(),l=null==u?void 0:u.uuid,s=h();return(0,a.Sk)("/api/organizations/".concat(l,"/sync/github/repo/").concat(n,"/").concat(t,"/tree/").concat(r),{queryKey:[o.o6,{orgUUID:l,owner:n,repo:t,branch:r}],staleTime:3e5,enabled:!!(n&&t&&r&&u&&s),meta:{noToast:!0}})})({owner:t,repo:r,branch:u||(null==(n=l.data)?void 0:n.default_branch)});return{data:{repo:l.data,tree:s.data},isFetching:l.isFetching||s.isFetching,error:l.error||s.error}}},85717:(e,n,t)=>{t.d(n,{$f:()=>z,K6:()=>Y,L5:()=>O,LP:()=>T,U5:()=>w,cI:()=>I,ef:()=>U,fb:()=>C,kJ:()=>E,qL:()=>R,vT:()=>K,y:()=>A,yy:()=>L,zF:()=>P,zH:()=>q});var a=t(68096),i=t(77186),o=t(1761),r=t(51121),u=t(71473),l=t(27062),s=t(77101),c=t(90119),d=t(21036),_=t(87606),g=t(62942),v=t(7620),y=t(46760),h=t(98251),m=t(45564),f=t(93049),p=t(91768),b=t(40459);let S="gdrive_success",L=()=>{let e=(0,o.mV)(),{data:n}=(0,p.LN)(),t=!!(Array.isArray(n)&&n.find(e=>e.type===s.v8.GDRIVE&&e.enabled));return!e||t},k=()=>{let{value:e}=(0,l.fS)("kingfisher_enabled"),n=(0,d.useLayer)("trials_freemium").get("free_integrations",!1);return e||n},T=()=>{let e=L(),n=k();return!!(!b.env.NEXT_PUBLIC_DISABLE_GDRIVE_INTEGRATION&&n&&e)},E=()=>{let{account:e,activeOrganization:n}=(0,o.YL)(),t=null==n?void 0:n.uuid,a=T(),{data:r,isFetched:l}=(0,i.Sk)("/api/organizations/".concat(t,"/sync/mcp/drive/auth"),{queryKey:[u.jR,{accountUUID:null==e?void 0:e.uuid,orgUUID:t}],enabled:a,staleTime:3e5});return{isAuthenticated:a&&!!(null==r?void 0:r.is_authenticated),isFetched:l}},I=function(){let{callerIdentifier:e,handleAuthSuccess:n,pathname:t,queryString:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isAuthenticated:l,isFetched:s}=E(),{addSuccess:d}=(0,r.Y)(),h=(0,y.A)(),{dropdownToOpen:f,clearCallerIdentifier:b}=(0,m.t)(),L=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];null==n||n(e),d(h.formatMessage({defaultMessage:"Successfully connected to Google Drive",id:"7RI6njc31e"}))},k=(e=>{let{callerIdentifier:n,pathname:t,queryString:a}=e,r=(0,g.usePathname)(),{account:l,activeOrganization:s}=(0,o.YL)(),d=null==l?void 0:l.uuid,y=null==s?void 0:s.uuid,h=T(),m=(0,_.useQueryClient)(),f=(0,c.V)(),b=(0,g.useSearchParams)(),{mutate:L}=(0,i.L2)("/api/organizations/".concat(y,"/sync/mcp/drive/auth/start"),"POST",{enabled:h,onSuccess:e=>{window.location.href=e.redirect_url}}),k=(0,v.useRef)(!1);return()=>{if(!h)return;let e="".concat(S,"=").concat(n).concat(a?"&".concat(a):""),i=(0,p.dH)({pathname:t||r,searchParams:b,queryString:e,isClaudeApp:f});if(m.invalidateQueries({queryKey:[u.jR,{accountUUID:d,orgUUID:y}]}),f)return void window.open("/settings/connectors?open_in_browser=1&auth_start=gdrive&origin=".concat(i));k.current||(k.current=!0,L({pre_auth_state:{origin:i},redirect_uri:new URL("/connect/mcp/drive/callback",window.location.origin).toString()}))}})({callerIdentifier:e,pathname:t,queryString:a});return(0,p.FZ)({callerIdentifier:e,successParam:S,handleOpen:L}),(0,v.useEffect)(()=>{e&&f===e&&(null==n||n(!0),b())},[f,n,e,b]),{isDriveAuthenticated:l,initDriveAuth:k,handleDriveTrigger:L,isFetched:s}},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,o.YL)(),a=null==n?void 0:n.uuid,r=null==t?void 0:t.uuid,l=T(),s=(0,_.useQueryClient)(),{mutate:c}=(0,h.ih)();return(0,i.L2)("/api/organizations/".concat(r,"/sync/mcp/drive/auth"),"DELETE",{enabled:!!(t&&l),...e,onSuccess:function(){for(var n,t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];s.invalidateQueries({queryKey:[u.jR,{accountUUID:a,orgUUID:r}]}),c({}),null==(n=e.onSuccess)||n.call(e,...i)}})},A=e=>{let{documentId:n}=e,{account:t,activeOrganization:a}=(0,o.YL)(),r=null==t?void 0:t.uuid,l=null==a?void 0:a.uuid,s=T(),c=(0,_.useQueryClient)(),d=(0,i.Sk)("/api/organizations/".concat(l,"/sync/mcp/drive/document/").concat(n,"?include_content=false"),{queryKey:[u.QB,{accountUUID:r,orgUUID:l,documentId:n}],enabled:s,meta:{noToast:!0}}),g=d.isError;return(0,v.useEffect)(()=>{g&&c.invalidateQueries({queryKey:[u.jR,{accountUUID:r,orgUUID:l}]})},[c,g,r,l]),d};function P(e){let{uri:n}=e,{data:t,isLoading:a}=A({documentId:n});return{title:null==t?void 0:t.title,isLoading:a}}let R=e=>{let{account:n,activeOrganization:t}=(0,o.YL)(),a=null==n?void 0:n.uuid,r=null==t?void 0:t.uuid,l=T(),s=(0,v.useMemo)(()=>e.map(e=>"/api/organizations/".concat(r,"/sync/mcp/drive/document/").concat(e)),[e,r]),c=(0,v.useMemo)(()=>({queryKey:e.map(e=>[u.qM,{accountUUID:a,orgUUID:r,documentId:e}]),enabled:l,meta:{noToast:!0}}),[e,a,r,l]);return(0,i._i)(s,c)},q=e=>{let{account:n,activeOrganization:t}=(0,o.YL)(),a=null==n?void 0:n.uuid,r=null==t?void 0:t.uuid,l=T(),s=(0,f.bI)(),{data:c,isSuccess:d,isLoading:_}=(0,i.Sk)("/api/organizations/".concat(r,"/sync/mcp/drive/recents"),{queryKey:[u.zu,{accountUUID:a,orgUUID:r}],enabled:e&&l,meta:{noToast:!0}});return(0,v.useEffect)(()=>{if(d&&c){let e=c.map(e=>{let{uri:n,title:t}=e;return{uri:n,title:t}});(0,f.Ac)(e)}},[d,c]),{recentDriveDocs:d?c:s,isLoading:_}},C=()=>{let e=k(),{value:n}=(0,l.fS)("apps_use_bananagrams"),t=(0,d.useLayer)("trials_freemium").get("free_integrations",!1);return e&&n||t},Y=()=>{let e=T(),n=C();return e&&n&&!b.env.NEXT_PUBLIC_DISABLE_GDRIVE_INTEGRATION},z=e=>{var n;let t=Y(),{account:a}=(0,o.YL)();return!!t&&(e?!!(null==e||null==(n=e.conversationSettings)?void 0:n.enabled_bananagrams):!!(null==a?void 0:a.settings.enabled_bananagrams))},O=()=>(0,l.fS)("rag_prototype").value,K=()=>{let e=Y(),n=(0,o.mV)(),{data:t}=(0,p.LN)(),{account:a}=(0,o.YL)(),i=O();return!!e&&!!i&&(n?!!(Array.isArray(t)&&t.find(e=>{var n;return e.type===s.v8.GDRIVE&&e.enabled&&(null==(n=e.config)?void 0:n.allow_indexing)})):!!(null==a?void 0:a.settings.enabled_gdrive_indexing))},U=()=>{let{account:e}=(0,o.YL)(),{mutate:n}=(0,a.Jy)(),{mutate:t}=(0,h.Bg)();return{toggleDriveSearchAndIndexingEnabled:a=>{var i;let{indexingEnabled:o,searchEnabled:r,dismissBanner:u}=a,l=u||!!o;o&&t({}),n({...null==e?void 0:e.settings,...void 0!==o?{enabled_gdrive_indexing:o}:null,...void 0!==r||!0===o?{enabled_bananagrams:null!=o?o:r}:null,...l?{dismissed_claudeai_banners:[...(null==e||null==(i=e.settings)?void 0:i.dismissed_claudeai_banners)||[],{banner_id:"drive_indexing_enablement_2/11_1",dismissed_at:new Date().toISOString()}]}:null})}}}},87296:(e,n,t)=>{t.d(n,{B9:()=>i,Lj:()=>o});let a=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$/,i=e=>a.test(e),o=(e,n)=>{if(!n)return!1;let t=e.split("@")[1];return n.includes(t)}}}]);