(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4670,5292],{2462:(e,t,n)=>{"use strict";n.d(t,{IQ:()=>a,Jd:()=>r,lx:()=>o});let r=["proMonthlyPromoCode","proAnnualPromoCode","welcomeMessageTitle","utmParams","max5xMonthlyPromoCode","max20xMonthlyPromoCode"],o=e=>{if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},a=(e,t)=>(null==t?void 0:t.overrides)?{...e,...t.overrides}:e},2975:(e,t,n)=>{"use strict";n.d(t,{ArkoseTokenProvider:()=>v,D5:()=>C,vr:()=>g});var r=n(54568),o=n(77186),a=n(27062),i=n(90119),s=n(70825),l=n(8139),c=n(7620),u=n(10158),d=n(46127);let f="ak-session-token",h=e=>{let{host:t,apiKey:n,nonce:o,integrity:a,onCompleted:i,onShown:s,onShow:u,onHide:d,onError:f,onScriptError:h,setArkoseEnforcement:m}=e,p=e=>{e.setConfig({onCompleted:i,onShown:s,onShow:u,onHide:d,onError:f}),m(e)};return(0,c.useEffect)(()=>()=>{window.setupEnforcement=void 0},[]),(0,r.jsx)(l.default,{id:"arkose-script",src:"https://".concat(t,"/v2/").concat(n,"/api.js"),type:"text/javascript","data-callback":"setupEnforcement",async:!0,defer:!0,onLoad:()=>{window.setupEnforcement||(window.setupEnforcement=p)},onError:h,nonce:o,integrity:a,crossOrigin:"anonymous"})},m=()=>{let e=(0,i.V)(),t=(0,u.fZ)(),{value:n}=(0,a.fS)("ak_enabled");return!e&&t&&n},p=(0,c.createContext)({isReady:!1,isChallenging:!1,lastCallerId:void 0,needsToken:!1,startTokenFlow:()=>{}});function v(e){let{host:t,apiKey:n,nonce:o,integrity:a,children:i}=e,[l,u]=(0,c.useState)(m()&&!!t&&!!n&&!!a),[v,g]=(0,c.useState)(void 0),[C,b]=(0,c.useState)(void 0),[S,w]=(0,c.useState)(!1),[x,y]=(0,d.Vc)(f,void 0),_=l&&!x;return(0,r.jsxs)(p.Provider,{value:{isReady:!!v,isChallenging:S,needsToken:_,lastCallerId:C,startTokenFlow:e=>{b(e),null==v||v.run()}},children:[i,l&&(0,r.jsx)(h,{host:t,apiKey:n,nonce:o,integrity:a,onCompleted:e=>{y(e.token)},onShown:()=>w(!0),onShow:()=>w(!0),onHide:()=>w(!1),onError:e=>{(0,s.Cp)(e.error)},onScriptError:e=>{u(!1),(0,s.Cp)(e)},setArkoseEnforcement:g})]})}function g(){return(0,c.useContext)(p)}let C=()=>{let e=m(),[t,n,r]=(0,d.Vc)(f,void 0),{mutateAsync:a}=(0,o.L2)("api/arkose/verify","POST");return(0,c.useCallback)(async()=>{e&&t&&(r(),await a({session_token:t}))},[e,a,t,r])}},8139:(e,t,n)=>{"use strict";n.d(t,{default:()=>o.a});var r=n(44760),o=n.n(r)},21956:(e,t,n)=>{"use strict";n.d(t,{Cu:()=>P,F7:()=>x,NA:()=>T,VL:()=>_,Vq:()=>k,WX:()=>w,bl:()=>y,nY:()=>S});var r=n(2975),o=n(10158),a=n(96712),i=n(1761),s=n(51121),l=n(48379),c=n(99539),u=n(63246),d=n(46612),f=n(71473);n(65631);var h=n(27062),m=n(87606),p=n(62942),v=n(7620),g=n(68096),C=n(51869),b=n(40459);let S=()=>{let e=(0,p.useRouter)(),t=(0,a.l)();return{refresh:()=>{e.refresh()},switchAndRefresh:(e,n)=>{t.set(d.eT.LAST_ACTIVE_ORG,e),n?location.pathname=n:location.reload()}}},w=(e,t,n)=>{let r=(0,l.S)(),{mutateAsync:o}=(0,g.nX)();return(0,v.useCallback)(async()=>{if(!e||!r||0===t.length)return;let a=t.map(e=>({document_id:"v3:".concat(e,":").concat(r[e]),accepted_via_checkbox:n}));await o({acceptances:a})},[e,r,t,o,n])},x=e=>{let t=(0,l.S)(),{mutateAsync:n}=(0,g.nX)();return(0,v.useCallback)(async r=>{if(!e||!t)return;let o=Object.entries(r).map(e=>{let[n,r]=e;return{document_id:"v3:".concat(n,":").concat(t[n]),accepted_via_checkbox:r}});0!==o.length&&await n({acceptances:o})},[e,t,n])},y=(e,t)=>{let{account:n,refetch:r,setActiveOrganizationUUID:o}=(0,i.YL)(),[a,l]=(0,v.useState)(!1),[c,u]=(0,v.useState)(!1),d=_(),{addSuccess:h}=(0,s.Y)(),{data:p}=(0,g.kd)(e),C=(0,m.useQueryClient)();return(0,v.useEffect)(()=>{n&&a&&c&&(t?t(d):d())},[c,d,a,n,t]),(0,v.useCallback)(async()=>{l(!0);let e=await r();if(await C.invalidateQueries({queryKey:[f.Jz]}),(null==p?void 0:p.organization_uuid)&&(o(p.organization_uuid),h("Successfully joined ".concat(p.organization_name))),e&&"google"in window){var t,n,a;null==(a=window.google)||null==(n=a.accounts)||null==(t=n.id)||t.cancel()}u(!0)},[p,h,r,o,C])},_=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,p.useSearchParams)().get("returnTo"),n=P(e);return(0,v.useCallback)(()=>{n(t)},[n,t])},P=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{account:t}=(0,i.YL)(),[n,a]=(0,v.useState)(!1),s=(0,p.useRouter)(),[l,d]=(0,v.useState)(null),f=(0,p.usePathname)(),m=(0,p.useSearchParams)(),g=(0,o.fZ)(),S=(e=>{let{account:t}=(0,i.YL)(),n=(0,c.y_)(e),o=(0,r.D5)(),{value:a}=(0,h.fS)("age_gate_reverification");return((0,v.useEffect)(()=>{t&&o()},[t,o]),t&&((0,u.VH)({account:t,isClaudeDot:e})||(0,u.Bs)(t,e)))?"/onboarding":t&&(0,u.u5)(t,e,a)?"/age-verification":t&&(0,u.NJ)(t,e)?"/invites":t&&(0,u.Ah)(t,e)?"/create":t&&n?"/upgrade":e?"/new":"/dashboard"})(g);return(0,v.useEffect)(()=>{(n||e)&&!t&&s.push((0,C.rt)(f,m.toString()))},[t,s,n,e,f,m]),(0,v.useEffect)(()=>{if(n&&t){let e=(0,C.Cy)(t,l,S,g,!!b.env.NEXT_PUBLIC_SHOW_US_GOVT_SYSTEM_USE_NOTIFICATION);e!==window.location.href.replace(window.location.origin,"")&&(s.push(e),s.refresh())}},[t,s,n,l,S,g]),(0,v.useCallback)(e=>{e&&d(decodeURIComponent(e)),a(!0)},[])};function k(){let[e,t]=(0,v.useState)(!1);return{getRecaptchaToken:(0,v.useCallback)(async(e,n)=>b.env.NEXT_PUBLIC_DISABLE_RECAPTCHA?Promise.resolve("recaptcha-ignore-token"):(t(!0),new Promise((r,o)=>{if("undefined"==typeof grecaptcha)return t(!1),o(Error("Recaptcha failed to load"));grecaptcha.enterprise.ready(()=>{grecaptcha.enterprise.execute(e,{action:n}).then(e=>{r(e),t(!1)},e=>{t(!1),o(e)})})})),[]),isLoading:e}}function T(e){let[t,n]=(0,v.useState)(!1);(0,v.useEffect)(()=>{if(!t){let t=setInterval(()=>{(window.grecaptcha||b.env.NEXT_PUBLIC_DISABLE_RECAPTCHA)&&(n(!0),e())},10);return()=>clearInterval(t)}},[t,n,e])}},48379:(e,t,n)=>{"use strict";n.d(t,{LegalDocsProvider:()=>i,S:()=>s});var r=n(54568),o=n(7620);let a=(0,o.createContext)(void 0),i=e=>{let{value:t,children:n}=e;return(0,r.jsx)(a.Provider,{value:t,children:n})};function s(){return(0,o.useContext)(a)}},48601:(e,t,n)=>{"use strict";n.d(t,{PublicArtifactAppWrapper:()=>u});var r=n(54568),o=n(97449),a=n(90730),i=n(7620),s=n(93901),l=n(92947),c=n(96900);let u=e=>{var t;let{artifact:n,remixBaseUrl:u,artifactId:d,activitySessionId:f,shouldTakeSnapshot:h}=e,{servers:m}=(0,l.gt)(),[p,v]=(0,i.useState)(!1),{data:g}=(0,s.m)({entityId:d,artifactEntityType:"published_artifact"}),C=(0,i.useMemo)(()=>{if((null==g?void 0:g.mcp_servers)&&m)return g.mcp_servers.map(e=>(0,a.u)(m,e))},[g,m]),b={mcpServers:m,ArtifactMcpModal:c.I,hasArtifactToolConfig:!!(null==g||null==(t=g.mcp_servers)?void 0:t.length),onManageConnectors:()=>v(!0)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.PublicArtifactContent,{artifact:n,remixBaseUrl:u,artifactId:d,activitySessionId:f,shouldTakeSnapshot:h,...b}),p&&C&&(0,r.jsx)(c.I,{isOpen:p,onClose:()=>v(!1),onAllow:()=>v(!1),mcpServers:C,artifactContext:{uuid:d,type:"published_artifact"}})]})}},51869:(e,t,n)=>{"use strict";n.d(t,{Cy:()=>a,HT:()=>l,TR:()=>c,q:()=>s,rt:()=>i});var r=n(63246),o=n(46612);let a=(e,t,n,a,i)=>{if(i&&!localStorage.getItem(o.EB.ACCEPTED_US_GOVERNMENT_SYSTEM_NOTIFICATION))return"/us-govt-system-warning";if(!t||!t.startsWith("/")||"/"===t||"/?"===t)return n;if((0,r.Xs)(e,a)){let e=new URL(n,window.location.origin),r=new URLSearchParams(e.search);return r.set("returnTo",t),"".concat(e.pathname,"?").concat(r.toString())}return s(t)},i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/login",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o="".concat(e,"?").concat(t),a=new URLSearchParams(r);return a.append("returnTo",o),"".concat(n,"?").concat(a.toString())};function s(e){let t=new URL(e,"http://example.com");return t.pathname.replace(/^\/+/,"/")+t.search}function l(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return t&&e.push(...Object.keys(localStorage).filter(e=>e.startsWith("".concat(o.sn,".")))),e.reduce((e,t)=>{let n=localStorage.getItem(t);return null!==n&&e.push([t,n]),e},[])}function c(e){e.forEach(e=>{let[t,n]=e;localStorage.setItem(t,n)})}},77720:(e,t,n)=>{Promise.resolve().then(n.bind(n,48601)),Promise.resolve().then(n.bind(n,34577)),Promise.resolve().then(n.bind(n,61529)),Promise.resolve().then(n.bind(n,87606)),Promise.resolve().then(n.bind(n,24199)),Promise.resolve().then(n.bind(n,99757)),Promise.resolve().then(n.bind(n,63339)),Promise.resolve().then(n.bind(n,16258)),Promise.resolve().then(n.bind(n,4049)),Promise.resolve().then(n.bind(n,84007)),Promise.resolve().then(n.bind(n,67933)),Promise.resolve().then(n.bind(n,3149)),Promise.resolve().then(n.bind(n,82613)),Promise.resolve().then(n.bind(n,38237)),Promise.resolve().then(n.bind(n,55474)),Promise.resolve().then(n.bind(n,27143)),Promise.resolve().then(n.bind(n,97449))},97449:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PublicArtifactContent:()=>g});var r=n(54568),o=n(57931),a=n(27143),i=n(85330),s=n(1761),l=n(54890),c=n(7620),u=n(55474),d=n(21956),f=n(41417),h=n(37076),m=n(76761),p=n(62971);let v=e=>{let{isOpen:t,onClose:n}=e,o=(0,d.Cu)();return(0,r.jsxs)(h.aF,{isOpen:t,onClose:n,children:[(0,r.jsx)(f.$,{variant:"ghost",size:"unset",className:"text-text-300 h-6 w-6 rounded-md active:scale-90 !absolute top-4 right-4",onClick:n,children:(0,r.jsx)(m.X,{size:16})}),(0,r.jsxs)("div",{className:"flex flex-col gap-6 mt-4",children:[(0,r.jsx)("p",{className:"text-lg font-medium",children:(0,r.jsx)(p.A,{defaultMessage:"You need a Claude account to use this artifact",id:"jzcrjmVTFk"})}),(0,r.jsx)("p",{children:(0,r.jsx)(p.A,{defaultMessage:"Log in to Claude to use or customize this artifact. No account? You can create one for free.",id:"2iPAwj1yCC"})}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(f.$,{variant:"primary",onClick:()=>o(window.location.href),className:"flex-1",children:(0,r.jsx)(p.A,{defaultMessage:"Log in",id:"odXlk858Gb"})})})]})]})},g=e=>{let{artifact:t,remixBaseUrl:n,artifactId:d,activitySessionId:f,shouldTakeSnapshot:h,mcpServers:m,ArtifactMcpModal:p,hasArtifactToolConfig:g,onManageConnectors:C}=e,b=t.type===l.vU.Text,[S,w]=(0,c.useState)(!1),{account:x}=(0,s.YL)(),{mutate:y}=(0,o.b5)(d,f),_=(0,c.useRef)(y);_.current=y;let P=(0,c.useRef)(null),[k,T]=(0,c.useState)(!1),[E,A]=(0,c.useState)(!1),{mutateAsync:I}=(0,o.AH)(),O=(0,i.f)({artifactContext:{uuid:d,type:"published_artifact"},onMissingOrganization:()=>{throw w(!0),Error("An error occurred")}}),j=(0,c.useMemo)(()=>({claudeComplete:O}),[O]);return(0,c.useEffect)(()=>{_.current({account_uuid:null==x?void 0:x.uuid})},[d,f,null==x?void 0:x.uuid]),(0,c.useEffect)(()=>{if(!k||!P.current||!x||E)return;let e=window.innerWidth,t=window.innerHeight;!h[e<768?"mobile":"desktop"]||e<320||t<480||e>2560||t>1600||(A(!0),(async()=>{try{var n;let r=await (null==(n=P.current)?void 0:n.getDOMSnapshot());r&&await I({domSnapshot:r,publishedArtifactUuid:d,viewportWidth:e,viewportHeight:t})}catch(e){}})())},[k,d,h,x,I,E]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.ArtifactFrame,{artifact:t,publishedArtifactUuid:d,remixBaseUrl:n,hasArtifactToolConfig:g,onManageConnectors:C,children:(0,r.jsx)(a.k,{isOpen:!0,content:t.content,type:t.type,language:t.language,showRaw:b,isCurrentStreaming:!1,richSandboxCapabilities:j,artifactContext:{uuid:d,type:"published_artifact"},richSandboxRef:P,showLoginModal:()=>w(!0),onDOMContentLoaded:()=>{T(!0)},mcpServers:m,ArtifactMcpModal:p})}),(0,r.jsx)(v,{isOpen:S,onClose:()=>w(!1)})]})}},99539:(e,t,n)=>{"use strict";n.d(t,{Hc:()=>m,XK:()=>p,Zl:()=>g,hz:()=>h,y_:()=>v});var r=n(77186),o=n(96712),a=n(51121),i=n(46612),s=n(71473),l=n(27062),c=n(7620),u=n(46760),d=n(75006),f=n(2462);function h(){var e;let t=(0,o.l)(),n=null!=(e=t.get(i.eT.PROMOTION))?e:null;return{data:(0,f.lx)(n),mutate:(0,c.useCallback)(e=>{t.set(i.eT.PROMOTION,JSON.stringify(e),{maxAgeSeconds:7776e3})},[t]),delete:(0,c.useCallback)(()=>{t.delete(i.eT.PROMOTION)},[t])}}function m(){var e,t,n;let{data:o}=h(),a=(t=null!=(e=null==o?void 0:o.promotionId)?e:null,n=e=>(0,f.IQ)(e,o),(0,r.Sk)("/api/billing/promotion/".concat(t),{queryKey:[s.t6,t],enabled:!!t,meta:{noToast:!0}},e=>(e.promotionId=t,n)?n(e):e));return{...a,isPending:a.isPending&&!!(null==o?void 0:o.promotionId)}}function p(){let{data:e,mutate:t}=h();(0,c.useEffect)(()=>{(null==e?void 0:e.needsCheckout)&&(e.needsCheckout=void 0,t(e))},[e,t])}function v(e){let{data:t,mutate:n}=h(),r=null==t?void 0:t.promotionId,o=(0,l.T9)("claude_ai_targeted_promotion","promotionId",null,d.z.string().nullable());return(0,c.useEffect)(()=>{!r&&o&&n({promotionId:o})},[r,o,n]),!!e&&!!(null==t?void 0:t.needsCheckout)&&!!(null==t?void 0:t.promotionId)}let g=()=>{let e=(0,c.useRef)(!1),t=(0,a.Y)(),n=(0,u.A)(),{delete:r}=h();return(0,c.useCallback)(o=>{(null==o?void 0:o.offerError)&&!e.current&&(e.current=!0,t.addError(n.formatMessage({defaultMessage:"This promotion is not available for your account",id:"Vu9kt6ezVH"})),r())},[t,r,n])}}},e=>{e.O(0,[1658,3473,2971,7261,2846,5006,1036,9474,5015,7773,4974,7463,8887,8132,5647,6631,2814,3103,3970,8864,2685,3131,5355,887,497,4258,4152,7987,1761,8518,4573,7237,7187,1544,7383,8189,5078,1336,4734,7143,7992,587,842,7378,7358],()=>e(e.s=77720)),_N_E=e.O()}]);